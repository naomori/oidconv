# Convert Open Images Dataset to other formats

## 概要

<!--* 起(1): 研究の基本的な背景を、広い読者に通じるように書く-->
ディープラーニングによる一般物体検知では、トレーニングデータとして、多数の画像データと正解情報(アノテーション情報)が必要です。
<!--* 承(1-2): 「起」を引き継ぐ形で、より本論に近い、絞り込んだ背景を説明する-->
大量の画像データとアノテーション情報を作成することは、非常に工数と時間を要します。
そのため、アルゴリズムの評価や課題の解決を行うために、一般に公開されているデータセットをトレーニングデータとして用いることが多くあります。
<!--* 転(1-2): 研究で取り組んだ問題について書く。文頭で「しかし」「ところが」などの逆説の接続詞を用いて、問題提起であることを明示する。-->
しかし、既存のアルゴリズムは、それぞれで異なるデータセット形式を前提としています。
そのため、使おうとするデータセットを、それぞれのアルゴリズムに合わせたデータセット形式に変換する必要がある一方、
データセット形式の変換は煩雑で工数と時間を要します。
<!--* 解(1-2): 「転」で示した問題点をどのように解決したのか、その手段及び結果を示す-->
そこで、データセット形式を変換するソフトウェアを開発・パッケージ化し、公開しました。
パッケージ化することにより、他のエンジニアが本ソフトウェアを利用しやすくなり、多くの工数と時間を節約することができます。
<!--* 結(1): 結論を一文で表す-->
以上より、一般に公開されているデータセットを他のデータセット形式に変換するソフトウェアを開発・公開しました。
本ソフトウェアにより、多くのエンジニアがディープラーニングによる一般物体検知を用いて自身の課題に簡単に取り組めるようになることを願います。

## 本ドキュメントの概要と想定する読者

<!-- 本ドキュメントで述べている内容 -->
本ドキュメントは、[Open Images Dataset V6 + Extensions][]を
他のデータセット形式に変換するソフトウェア(**oidconv**)の概要、インストール方法、使い方を説明します。

<!-- 本ドキュメントが想定する読者 -->
本ドキュメントと**oidconv**の使用者は、公開データセットである[Open Images Dataset V6 + Extensions][]を
自分のタスクに応用したいエンジニアを想定しています。
したがって、ディープラーニング・データセット形式についてある程度の知識を持っていることを前提としています。

<!-- 本ドキュメントの目次 -->
本ドキュメントでは、以下を説明します。

0. 背景と目的
1. **oidconv** で出来ること
   - ユーザが、データセット形式の変換ソフトウェア**oidconv**を使って、実現出来ることについて説明します。
2. **oidconv**のインストール方法
   - ユーザが、**oidconv**をLinuxにインストールする方法について説明します。
3. 異なるデータセット形式への変換方法
   - ユーザが、**oidconv**を使って、[Open Images Dataset V6 + Extensions][]を他のデータセット形式へ変換する方法について説明します。
    
- - -
## 背景と目的
    
### はじめに

<!-- Open Images Dataset V6 + Extensions を使う理由 -->

<!-- oidconv を開発した経緯 -->
ディープラーニングを利用するにあたって、自身のタスク(一般物体検知)を解決するために、
State-of-The-Art(SOTA)のアルゴリズムと、公開されているデータセットを利用することを考えました。

<!-- oidconv が解決する問題 -->
しかし、SOTAのアルゴリズムは、それぞれで異なるデータセット形式を入力とすることを想定しています。
したがって、利用したいデータセットを、各アルゴリズムに合うデータセット形式に自分で変換する必要がありました。

<!-- oidconv で目指すこと -->
そこで、使いたいデータセット([Open Images Dataset V6 + Extensions][])を
他のデータセット形式に変換するソフトウェア(**oidconv**)を開発することにしました。

### 利用するデータセット

[Open Images Dataset V6 + Extensions][]は、... です。
なぜ[Open Images Dataset V6 + Extensions][]を利用したいかと言うと...
[Open Images Dataset V6 + Extensions][]のフォーマットなどの詳しい内容は[OID.md][]をご覧ください。

- - -
## 1. oidconv で出来ること

**oidconv**は、[Open Images Dataset V6 + Extensions][]を他のデータセット形式に変換します。
**oidconv**がサポートするデータセット形式を以下に示します。
* [Amazon SageMaker Ground Truth][]
* [YOLO format][]
* [COCO][]

**ただし、**oidconv**がサポートするデータセットは、物体検知のみです。**  
分類、セマンティックセグメンテーションなどのタスクはサポートしません。

[Amazon SageMaker Ground Truth][], [YOLO format][], [COCO][] のデータセット形式については、
`doc/`ディレクトリ以下のドキュメントを参照してください。

- - -
## 2. oidconv のインストール

### 2.1. 想定する使用環境

### インストールの確認
### 注意事項

- - -
## 3. データセット形式の変換

## 3.1. [Amazon SageMaker Ground Truth][]への変換

## 3.2. [YOLO format][]への変換

## 3.3. [COCO][]への変換

## 注意事項
## 変換後の確認

<!-- References -->

[Open Images Dataset V6 + Extensions]: https://storage.googleapis.com/openimages/web/index.html
[OID.md]: ./doc/OID.md
[YOLO format]: https://github.com/AlexeyAB/Yolo_mark/issues/60#issuecomment-401854885
[COCO]: http://cocodataset.org/#home
[Amazon SageMaker Ground Truth]: https://aws.amazon.com/jp/sagemaker/groundtruth/

<!--
1. ７つの原則
1.1. 主題文: oidconvの出来ることと使い方を伝えたい。
1.2. 読み手: oidconvを使うエンジニア。
     背景知識: ML/DLについてある程度の知識を持った人。公開されたデータセットを使って自分のタスクに応用したい人。
1.3. 大事なこと: oidconv で出来ること

2. 構成を練る
2.1. 知っている情報から新しい情報へとつなげる
   - 利用するデータセットの概要とそれを使う理由を説明します。
   - そこから他のデータセット形式へ変換する理由について説明します。
2.2. 基本は「導入・本論・展開」の三部構成
   - 導入: 文章が扱う内容、どこにどんな内容が描いてあるか、読み手がその文章を読むべきかどうかを判断できる内容を書く
   + 本論: 書き手が読み手に伝えたい情報を詳しく説明する
      - 起きたこと、調べたこと、考えたこと
      - 冗長になりがちなので、無駄を削ぎ落とすことを考えること
   + 展開: 本論で示した情報をどのように判断し活用するのか、書き手からの要望やアドバイスを読み手に伝える
      - 読み手に何かしらの行動を換気することが目的
   - 実際に文書を書くときの心得は、「書きやすいところから書く/整理は後から」
2.3. 三部構成のパーツを組み合わせる
   - 文章のまとまり＝パーツを組み合わせて大きな文章を構築する
   - パーツ自体も三部構成で書く
   - パーツが大きいときは小さなパーツに分割する
   - ボトムアップとトップダウンの両方向で構成する
   - あるパーツの展開部分と次のパーツの導入部分を説ずし、１つにまとめることもできる
2.4. 順列型と並列型
   - パーツの型として、順列型と並列型がある
   - 型を組み合わせて利用することで、読む人がその文章の構成を把握することができる。
2.5. 本論は「IMR」
   - Issue Method Result (IMR)
   - 1つの文書には、1 issue, 1 result
   - Issue と Result がきちんと対応関係にあることを確認すること
   - I: Open Images Dataset を利用して、既存のアルゴリズムを訓練し、自分の問題を解決したい。
      - しかし、既存のアルゴリズムはそれぞれで異なるデータセット形式を前提としていることが多く、それに合わせたデータセット形式に変換する必要がある。
      - しかも、その変換処理は意外に面倒で時間がかかる。
   - M: Open Images Dataset を他のデータセット形式に変換するツールを開発した。
   - R: その結果、何度も希望のデータセット形式に変換する手間を省くことが出来た。
2.6. 「つなぎ」が主張を明確にする
   - 情報と情報の間に「つなぎ」を挟むことで主張は明確になる
   - 「つなぎ」で読み手の予測精度を高めることが読みやすさにつながる
   - いろいろな大きさの「つなぎ」を使いこなそう
2.7. 接続詞が文脈を作る
   - 接続詞で情報をつないで主張を明確にしよう
   - 接続詞を「つなぎ」に使って、続く文章の内容を読み手に予測させよう
   * 形容詞・副詞を出来る限り削り、基本的に名詞と動詞で文章を構成すること。
2.8. パラグラフ・ライティング
   - パラグラフを積み重ねるように文章を書こう
   - １つの段落には、１つの役割だけを与えよう
   - パラグラフの冒頭の１文でそのパラグラフの主張が分かるように書こう
3. 確実に伝える
3.1. 厳しい読み手になろう
   - 他人の視点から文章を読み返す週間を身に着けよう
   - 書かれている通りに読むことを意識しよう
   - 声に出して読むのも効果的
3.2. 「なぜ」の不足：理由を補って主題の立ち位置を明確にする
   - 「なにを」「どのように」だけではなく、「なぜ」も書こう
   - 自分のやったことを他の選択肢と比較しよう
   - 読み手が考える「普通の選択肢」を予測しよう
3.3. 「なぜ」を繰り返す
   - 主張に対して「なぜ」を繰り返し適用し、問題の本質を見つけ出そう。
   - 書き手と読み手の知識ギャップを埋めるまで繰り返そう
   - 「なぜ」が上手く書けない箇所にこそ本質が隠れている
3.4. 全体から詳細へ
   - まず全体像を示してから詳細情報を書こう
   - 詳細情報は既有知識とつなげやすい順番で示そう
   - 話の主軸がわからなくなったら文章を書く手を止めてよく検討しよう
3.5. 助詞の使い方を見直そう
   - 「てにをは」と言えど甘く見ては駄目。適切な助詞を選ぶ原則を身に着けよう。
   - 助詞は読み手に次の展開を予測させる「つなぎ」
   - 曖昧な助詞は避け、主張を明確にする言い回しを使おう
3.6. 文脈を上手く流すには
   - 段落と段落とを滑らかにつなげると、文脈が上手く流れていく
   - 流れがいまひとつに思えたら、段落の中身を前後の段落から補完できるか試してみよう
   - 補完したものと食い違いが大きいときは、前後を含めて構成を検討しよう
3.7. 背景説明は最短経路に絞る
   - 大事なことをすばやく読み手に伝えることに集中しよう
   - 背景説明は、一番大事な主張に対してのみ、簡潔に
   - 自分が勉強した証拠を示すために書かないこと
3.8. 起きたことを時系列で語らない
   - 自分が体験したことを起きた順に書かないこと
   - 主題を最短経路で語り、その他のことを書かない
   - 苦労話や自慢話は誰も読みたくない。バッサリ削ろう。
3.9. 曖昧な表現を避ける
   - 人に主題を伝えると決めた以上、曖昧な言葉で誤魔化さない
   - 文章が曖昧になりやすいパターンをおさえ、厳しい目で読み返そう
   - 曖昧さは書き手の責任。日本語のせいにしては駄目。
3.10. 修飾語と被修飾語の関係を改善する
   - 修飾語と被修飾語との関係が読みやすさを大きく左右する
   - 原則をおさえて就職関係を改善しよう
   - 迷ったら幾通りも書き出してみて、良いのを選ぼう
3.11. 主語と述語についての心得
   - 主語と述語の距離が離れるとわかりにくい文になりやすい
   - 不用意な二重主語文に注意しよう
   - 主語と述語とが整合しているか、確認しよう
4. ライティングの実技
4.1. とにかく書いてみる
   - とにかく書き出そう。書いているうちに書けるようになる
   - 書いてみれば、何が足りないか、何を書きたいかがわかってくる
   - 余裕を持って書こう。締切間近になって書き始めないこと。
4.2. 「とにかく書く」ための箇条書き活用法
   - 「とにかく書く」ための道具として、箇条書きを活用しよう
   - 各項目は、トピックセンテンスに使えるくらい主張を明確に
   - 箇条書きは頻繁に修正する。パソコンを使って書くと便利
4.3. 何度も書く
   - よい文章を書くには「書き直し」をためらわないこと
   - 難しいのは、一番良い文を選ぶこと。日頃から読む目を鍛えておこう
   - 最後には文章をギュッと絞り込む。5%は削ろう
4.4. 理工系論文の書き方
   - 理工系論文は「定石」にのっとって書く
   - 論文 = 序論・背景（導入）+ IMR（本論）+ 議論・結論（展開）
   - 定石は分野によって少しずつ異なるので、手本となる論文やガイドラインを参考にすること
4.5. 論文概要は「起承転解結」
   - 論文概要は10秒で理解できる文を目指そう
   - 字数制限の厳しい論文概要は、行単位で型どおりに加工
   +「起承転解結」の詩を書くつもりで!
      - 起: 研究の基本背景
      - 承: より本論に近い絞り込んだ背景
      - 転: 研究で取り組んだ問題点, 着目したポイントをアピール
      - 解: 問題点を解決した手段と結果
      - 結: 研究の結論
4.6. 引用の仕方
   - 他社の記述と自分の意見との境目を明確に！
   - 理工系論文では文章の引用を控えめに。簡潔に要約すること。
   - 文献情報の書き方は決められている場合が多いので、よく確認を。
4.7. 図表の書き方
   - 図や表にも、文章と同じく作法がある。読み手の立場を意識しよう。
   - 人の論文から見やすい図表の作法を見習おう
   - まっさきに図表に目を通す読み手も多いので、気を配ること。
-->
